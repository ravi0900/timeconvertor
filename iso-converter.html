<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="A powerful tool to convert ISO 8601 date strings to timestamps (ms, µs, ns) and human-readable formats. It can also convert timestamps and human dates into ISO 8601 format with timezone support.">
    <meta name="keywords" content="iso 8601 converter, date converter, timezone, timestamp, utc, local time, iso8601, date parser, timestamp to iso, date format">
    <title>Advanced ISO 8601 Date &amp; Timestamp Converter | Time Tools</title>
    <link rel="icon" href="favicon.svg" type="image/svg+xml">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="page-wrapper">
        <div class="side-ad left-ad ad-container">
        </div>
        <div class="content-wrapper">
            <nav>
                <ul>
            <li><a href="index.html">UTC Date Converter</a></li>
            <li><a href="iso-converter.html" class="active">ISO 8601 Converter</a></li>
            <li><a href="duration-converter.html">Duration Converter</a></li>
            <li><a href="docs.html">Docs</a></li>
            <li class="theme-toggle-container"><button id="theme-toggle">🌓</button></li>
        </ul>
    </nav>

    <div class="card">
        <h2>Human Date to ISO 8601 Date</h2>

        <div class="container">
            <label>Year: <input type="number" id="hd_year" required></label>
            <label>Month: <input type="number" id="hd_month" min="1" max="12" required></label>
            <label>Day: <input type="number" id="hd_day" min="1" max="31" required></label>
            <label>Hour: <input type="number" id="hd_hour" min="0" max="23" required></label>
            <label>Minute: <input type="number" id="hd_minute" min="0" max="59" required></label>
            <label>Second: <input type="number" id="hd_second" min="0" max="59" required></label>
        </div>

        <div style="margin-bottom: 20px;">
            <input type="radio" id="hd_tz_gmt" name="hd_timezone_type" value="gmt" checked>
            <label for="hd_tz_gmt" style="display: inline;">GMT/UTC</label>
            <input type="radio" id="hd_tz_local" name="hd_timezone_type" value="local" style="margin-left: 20px;">
            <label for="hd_tz_local" style="display: inline;">Local Time</label>
        </div>

        <button id="convertHdBtn">Convert to ISO Date</button>

        <div id="hd_results">
            <h2>ISO 8601 Dates</h2>
            <p>ISO 8601 (UTC): <span id="hd_iso_utc"></span><button class="copy-btn" data-target="hd_iso_utc">Copy</button></p>
            <p>ISO 8601 (Local): <span id="hd_iso_local"></span><button class="copy-btn" data-target="hd_iso_local">Copy</button></p>
        </div>
    </div>

    <div class="ad-placeholder ad-container">
    </div>

   
    <div class="card">
        <h1>ISO 8601 Date Converter</h1>

        <div class="container">
            <label>ISO 8601 Date String: <input type="text" id="iso_string" placeholder="e.g., 2025-08-31T23:59:59+05:30" style="width: 300px;"></label>
        </div>

        <button id="convertIsoBtn">Convert</button>

        <div id="iso_results">
            <h2>UTC Timestamps</h2>
            <p>Milliseconds: <span id="iso_ms"></span><button class="copy-btn" data-target="iso_ms">Copy</button></p>
            <p>Microseconds: <span id="iso_us"></span><button class="copy-btn" data-target="iso_us">Copy</button></p>
            <p>Nanoseconds: <span id="iso_ns"></span><button class="copy-btn" data-target="iso_ns">Copy</button></p>
        </div>

        <div id="iso_date_results">
            <h2>Converted Dates</h2>
            <p>GMT/UTC Time: <span id="iso_date_gmt_time"></span><button class="copy-btn" data-target="iso_date_gmt_time">Copy</button></p>
            <p>Your Local Time: <span id="iso_date_local_time"></span><button class="copy-btn" data-target="iso_date_local_time">Copy</button></p>
            <p>Relative Time: <span id="iso_date_relative_time"></span></p>
        </div>
    </div>

    <div class="card">
        <h2>Timestamp to ISO 8601 Date</h2>

        <div class="container">
            <label>Timestamp: <input type="text" id="timestamp" placeholder="Enter seconds, ms, µs, or ns" style="width: 250px;"></label>
        </div>

        <button id="convertTsBtn">Timestamp to ISO Date</button>

        <div id="ts_results">
            <h2>Converted Dates</h2>
            <p>ISO 8601 (UTC): <span id="iso_utc_time"></span><button class="copy-btn" data-target="iso_utc_time">Copy</button></p>
            <p>ISO 8601 (Local): <span id="iso_local_time"></span><button class="copy-btn" data-target="iso_local_time">Copy</button></p>
        </div>
    </div>
        </div>
        <div class="side-ad right-ad ad-container">
        </div>
    </div>

    <script>
        function getRelativeTime(date) {
            const now = new Date();
            const diffInSeconds = (date.getTime() - now.getTime()) / 1000;
            
            const rtf = new Intl.RelativeTimeFormat('en', { numeric: 'auto' });

            const units = [
                { unit: 'year', seconds: 31536000 },
                { unit: 'month', seconds: 2592000 },
                { unit: 'week', seconds: 604800 },
                { unit: 'day', seconds: 86400 },
                { unit: 'hour', seconds: 3600 },
                { unit: 'minute', seconds: 60 },
            ];

            for (const { unit, seconds } of units) {
                if (Math.abs(diffInSeconds) >= seconds) {
                    const value = Math.round(diffInSeconds / seconds);
                    return rtf.format(value, unit);
                }
            }
            
            const value = Math.round(diffInSeconds);
            if (Math.abs(value) > 0) {
                return rtf.format(value, 'second');
            }
            
            return 'just now';
        }

        function copyToClipboard(elementId) {
            const textToCopy = document.getElementById(elementId).textContent;
            if (navigator.clipboard && textToCopy) {
                navigator.clipboard.writeText(textToCopy).then(() => {
                    const originalBtn = document.querySelector(`button[data-target='${elementId}']`);
                    if (originalBtn) {
                        const originalText = originalBtn.textContent;
                        originalBtn.textContent = 'Copied!';
                        setTimeout(() => {
                            originalBtn.textContent = originalText;
                        }, 1500);
                    }
                }).catch(err => {
                    console.error('Failed to copy: ', err);
                });
            }
        }

        function convertFromIsoString() {
            const isoString = document.getElementById('iso_string').value.trim();
            if (!isoString) return;

            const date = new Date(isoString);
            const dateInMs = date.getTime();

            const resultsDiv = document.getElementById('iso_results');
            const msSpan = document.getElementById('iso_ms');
            const usSpan = document.getElementById('iso_us');
            const nsSpan = document.getElementById('iso_ns');

            const dateResultsDiv = document.getElementById('iso_date_results');
            const gmtSpan = document.getElementById('iso_date_gmt_time');
            const localSpan = document.getElementById('iso_date_local_time');
            const relativeSpan = document.getElementById('iso_date_relative_time');

            if (isNaN(dateInMs)) {
                msSpan.textContent = 'Invalid Date String';
                usSpan.textContent = 'Invalid Date String';
                nsSpan.textContent = 'Invalid Date String';
                
                gmtSpan.textContent = 'Invalid Date String';
                localSpan.textContent = 'Invalid Date String';
                relativeSpan.textContent = '';
            } else {
                const ms = BigInt(dateInMs);
                const us = ms * 1000n;
                const ns = us * 1000n;

                msSpan.textContent = ms.toString();
                usSpan.textContent = us.toString();
                nsSpan.textContent = ns.toString();

                gmtSpan.textContent = date.toUTCString();
                localSpan.textContent = date.toString();
                relativeSpan.textContent = getRelativeTime(date);
            }
            resultsDiv.style.display = 'block';
            dateResultsDiv.style.display = 'block';
        }

        function convertFromHumanDate() {
            const year = parseInt(document.getElementById('hd_year').value);
            const month = parseInt(document.getElementById('hd_month').value);
            const day = parseInt(document.getElementById('hd_day').value);
            const hour = parseInt(document.getElementById('hd_hour').value) || 0;
            const minute = parseInt(document.getElementById('hd_minute').value) || 0;
            const second = parseInt(document.getElementById('hd_second').value) || 0;

            const isLocal = document.getElementById('hd_tz_local').checked;

            let dateInMs;
            // Month is 0-indexed in JavaScript Date, so we subtract 1.
            if (isLocal) {
                dateInMs = new Date(year, month - 1, day, hour, minute, second).getTime();
            } else {
                dateInMs = Date.UTC(year, month - 1, day, hour, minute, second);
            }

            const hdResultsDiv = document.getElementById('hd_results');
            const isoUtcSpan = document.getElementById('hd_iso_utc');
            const isoLocalSpan = document.getElementById('hd_iso_local');

            if (isNaN(dateInMs)) {
                isoUtcSpan.textContent = 'Invalid Date';
                isoLocalSpan.textContent = 'Invalid Date';
            } else {
                const date = new Date(dateInMs);
                isoUtcSpan.textContent = date.toISOString();

                // For local ISO string, we need to build it manually to include timezone offset
                const tzOffset = -date.getTimezoneOffset();
                const diff = tzOffset >= 0 ? '+' : '-';
                const pad = (num) => (num < 10 ? '0' : '') + num;
                
                const localIsoString = date.getFullYear() +
                    '-' + pad(date.getMonth() + 1) +
                    '-' + pad(date.getDate()) +
                    'T' + pad(date.getHours()) +
                    ':' + pad(date.getMinutes()) +
                    ':' + pad(date.getSeconds()) +
                    diff + pad(Math.floor(Math.abs(tzOffset) / 60)) +
                    ':' + pad(Math.abs(tzOffset) % 60);

                isoLocalSpan.textContent = localIsoString;
            }
            hdResultsDiv.style.display = 'block';
        }

        function convertFromTimestamp() {
            const timestampStr = document.getElementById('timestamp').value.trim();
            if (!timestampStr) return;

            if (!timestampStr.match(/^\d+$/)) {
                return;
            }

            let timestamp;
            try {
                timestamp = BigInt(timestampStr);
            } catch (e) {
                alert("Invalid timestamp value. It might be too large.");
                return;
            }

            let dateInMs;
            if (timestampStr.length > 16) { // nanoseconds
                dateInMs = Number(timestamp / 1000000n);
            } else if (timestampStr.length > 13) { // microseconds
                dateInMs = Number(timestamp / 1000n);
            } else if (timestampStr.length > 10) { // milliseconds
                dateInMs = Number(timestamp);
            } else { // seconds
                dateInMs = Number(timestamp * 1000n);
            }

            const date = new Date(dateInMs);

            const isoUtcSpan = document.getElementById('iso_utc_time');
            const isoLocalSpan = document.getElementById('iso_local_time');
            
            if (isNaN(date.getTime())) {
                isoUtcSpan.textContent = 'Invalid Timestamp';
                isoLocalSpan.textContent = 'Invalid Timestamp';
            } else {
                isoUtcSpan.textContent = date.toISOString();
                
                // For local ISO string, we need to build it manually to include timezone offset
                const tzOffset = -date.getTimezoneOffset();
                const diff = tzOffset >= 0 ? '+' : '-';
                const pad = (num) => (num < 10 ? '0' : '') + num;
                
                const localIsoString = date.getFullYear() +
                    '-' + pad(date.getMonth() + 1) +
                    '-' + pad(date.getDate()) +
                    'T' + pad(date.getHours()) +
                    ':' + pad(date.getMinutes()) +
                    ':' + pad(date.getSeconds()) +
                    diff + pad(Math.floor(Math.abs(tzOffset) / 60)) +
                    ':' + pad(Math.abs(tzOffset) % 60);

                isoLocalSpan.textContent = localIsoString;
            }
            document.getElementById('ts_results').style.display = 'block';
        }

        // --- Event Listeners ---
        document.getElementById('convertIsoBtn').addEventListener('click', convertFromIsoString);
        document.getElementById('iso_string').addEventListener('input', convertFromIsoString);

        document.getElementById('convertHdBtn').addEventListener('click', convertFromHumanDate);
        document.querySelectorAll('.card:nth-child(3) input').forEach(input => {
            input.addEventListener('input', convertFromHumanDate);
        });

        document.getElementById('convertTsBtn').addEventListener('click', convertFromTimestamp);
        document.getElementById('timestamp').addEventListener('input', convertFromTimestamp);

        document.querySelectorAll('.copy-btn').forEach(button => {
            button.addEventListener('click', () => copyToClipboard(button.dataset.target));
        });

        // Prefill human date inputs with current date/time on page load
        (function() {
            const now = new Date();
            document.getElementById('hd_year').value = now.getFullYear();
            document.getElementById('hd_month').value = now.getMonth() + 1; // Month is 0-indexed
            document.getElementById('hd_day').value = now.getDate();
            document.getElementById('hd_hour').value = now.getHours();
            document.getElementById('hd_minute').value = now.getMinutes();
            document.getElementById('hd_second').value = now.getSeconds();
        })();

        // Hide results on page load
        document.getElementById('iso_results').style.display = 'none';
        document.getElementById('ts_results').style.display = 'none';
        document.getElementById('iso_date_results').style.display = 'none';
        document.getElementById('hd_results').style.display = 'none';

        // Trigger initial conversion for prefilled human date
        convertFromHumanDate();

        // --- Theme Toggle ---
        (function() {
            const themeToggle = document.getElementById('theme-toggle');
            const body = document.body;
            
            themeToggle.addEventListener('click', () => {
                body.classList.toggle('dark-mode');
                const isDarkMode = body.classList.contains('dark-mode');
                localStorage.setItem('theme', isDarkMode ? 'dark' : 'light');
                themeToggle.textContent = isDarkMode ? '☀️' : '🌒';
            });

            const savedTheme = localStorage.getItem('theme');
            const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;

            if (savedTheme === 'dark' || (!savedTheme && prefersDark)) {
                body.classList.add('dark-mode');
                themeToggle.textContent = '☀️';
            } else {
                body.classList.remove('dark-mode');
                themeToggle.textContent = '🌒';
            }
        })();
    </script>
    <script src="ads.js" defer></script>
</body>
</html>
